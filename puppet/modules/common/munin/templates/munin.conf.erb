# PUPPET
# Example configuration file for Munin, generated by 'make build'
tls enabled
tls_verify_certificate yes
tls_private_key /etc/<%= clientcert %>_key.pem
tls_certificate /etc/<%= clientcert %>_cert.pem
tls_ca_certificate /usr/share/ca-certificates/local/ca.pem
tls_verify_depth 5

<% monitor_hosts.each do |host| %>
[<%= host %>]
  address <%= host %>
  use_node_name yes
<% end %>

<%#
  all_vars = scope.to_hash()
  File.open( '/tmp/munin.conf.vars.yml', 'w' ) do |out|
    YAML.dump( all_vars, out )
  end
%>

includedir /etc/munin/munin-conf.d
